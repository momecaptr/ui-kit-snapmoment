import{r as n}from"./index-BP8_t0zE.js";import{c as N,u as M,a as O,P as S,b as I}from"./index-BTQGKeGX.js";import{u as A,a as B}from"./index-DdaKtqnf.js";import{P as H}from"./index-BQor3Phr.js";import{j as l}from"./jsx-runtime-CexXSJP5.js";var y="Checkbox",[K,Q]=N(y),[L,q]=K(y),j=n.forwardRef((e,f)=>{const{__scopeCheckbox:t,name:c,checked:p,defaultChecked:r,required:h,disabled:a,value:b="on",onCheckedChange:m,form:i,...x}=e,[d,k]=n.useState(null),v=M(f,o=>k(o)),E=n.useRef(!1),R=d?i||!!d.closest("form"):!0,[u=!1,P]=O({prop:p,defaultProp:r,onChange:m}),D=n.useRef(u);return n.useEffect(()=>{const o=d?.form;if(o){const C=()=>P(D.current);return o.addEventListener("reset",C),()=>o.removeEventListener("reset",C)}},[d,P]),l.jsxs(L,{scope:t,state:u,disabled:a,children:[l.jsx(S.button,{type:"button",role:"checkbox","aria-checked":s(u)?"mixed":u,"aria-required":h,"data-state":_(u),"data-disabled":a?"":void 0,disabled:a,value:b,...x,ref:v,onKeyDown:I(e.onKeyDown,o=>{o.key==="Enter"&&o.preventDefault()}),onClick:I(e.onClick,o=>{P(C=>s(C)?!0:!C),R&&(E.current=o.isPropagationStopped(),E.current||o.stopPropagation())})}),R&&l.jsx(z,{control:d,bubbles:!E.current,name:c,value:b,checked:u,required:h,disabled:a,form:i,style:{transform:"translateX(-100%)"},defaultChecked:s(r)?!1:r})]})});j.displayName=y;var g="CheckboxIndicator",w=n.forwardRef((e,f)=>{const{__scopeCheckbox:t,forceMount:c,...p}=e,r=q(g,t);return l.jsx(H,{present:c||s(r.state)||r.state===!0,children:l.jsx(S.span,{"data-state":_(r.state),"data-disabled":r.disabled?"":void 0,...p,ref:f,style:{pointerEvents:"none",...e.style}})})});w.displayName=g;var z=e=>{const{control:f,checked:t,bubbles:c=!0,defaultChecked:p,...r}=e,h=n.useRef(null),a=A(t),b=B(f);n.useEffect(()=>{const i=h.current,x=window.HTMLInputElement.prototype,k=Object.getOwnPropertyDescriptor(x,"checked").set;if(a!==t&&k){const v=new Event("click",{bubbles:c});i.indeterminate=s(t),k.call(i,s(t)?!1:t),i.dispatchEvent(v)}},[a,t,c]);const m=n.useRef(s(t)?!1:t);return l.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:p??m.current,...r,tabIndex:-1,ref:h,style:{...e.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function s(e){return e==="indeterminate"}function _(e){return s(e)?"indeterminate":e?"checked":"unchecked"}var U=j,V=w;export{j as C,V as I,U as R};
